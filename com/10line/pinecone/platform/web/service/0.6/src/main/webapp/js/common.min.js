$(function () {
    var scrolls, paddings, els = $("#nav a:lt(4)"), marker = $("#marker");
	
    $(window).scroll(function () {
        var scroll = $(this).scrollTop();
        for (var i in scrolls) {
            if (scrolls[i] > scroll - 200)break;
        }
        marker.css({left:paddings[i] + "px"});
        els.removeClass("active").eq(i).addClass("active");
    });
	
    $(window).resize(function () {
        scrolls = [], paddings = [];
        els.each(function (i) {
            paddings.push($(this).offset().left + $(this).width() / 2 + (i == 0 ? -16 : 0));
            var id = $(this).attr("href");
            scrolls.push($(id).offset().top);
        });
        scrolls[1] = scrolls[1] + 200;
        $(window).trigger("scroll");
    }).trigger("resize");
    els.click(function (e) {
        e.preventDefault();
        var id = $(this).attr("href");
		var top = $(id).offset().top-90;
        $('html,body').addClass("scrolling").animate({scrollTop:top + "px"}, 800).removeClass("scrolling");
        return false;
    });
    
    
    $("#logo").click(function () {
        $("body,html").animate({scrollTop:0}, 800);
    });
	
    $(".questions li a").click(function () {
        $("body,html").animate({scrollTop:2280}, 800);
    });
    

    var slideWidth = $("#slide").width();
    $("#slider").draggable({opacity:0.8, axis:'x', revert:true, containment:'#slide', drag:function (event, ui) {
        if (ui.position.left > slideWidth * 0.6) {
            console.log(ui.position.left + "," + slideWidth * 0.6);
            mouseupBt();
        } else {
            mousedownBt();
        }
    }, stop:function (event, ui) {
        if (ui.position.left < slideWidth * 0.6) {
            mousedownBt();
            $(this).animate({left:0});
        } else {
            console.log(ui.position.left + "," + slideWidth * 0.6);
            mousedownBt();
        }
    }
});
   

/*ck add begin 20121216*/
	$(".aboutJava").click(function () {
		$("#popupwindow .active").removeClass("active");
		$(".detailJava").addClass("active");
        $(".windows").show();
    });
	$(".aboutWeb").click(function () {
		$("#popupwindow .active").removeClass("active");
		$(".detailWeb").addClass("active");
        $(".windows").show();
    });
	$(".aboutLinux").click(function () {
        $("#popupwindow .active").removeClass("active");
		$(".detailLinux").addClass("active");
        $(".windows").show();
    });
	$(".helpPolicy").click(function () {
		$("#popupwindow .active").removeClass("active");
		$(".detailPolicy").addClass("active");
        $(".windows").show();
    });
	$(".helpAgreement").click(function () {
		$("#popupwindow .active").removeClass("active");
		$(".detailAgreement").addClass("active");
        $(".windows").show();
    });
   

	$(".iphoneTab").mouseover(function(){
		
		$(".icoAndroidBigPic").fadeOut(1000);
		$(".icoSymbianBigPic").fadeOut(1000);
		$(".icoIphoneBigPic").fadeIn(1000);

		$(".androidBtns").fadeOut(1000);
		$(".symbianBtns").fadeOut(1000);
		$(".iphoneBtns").fadeIn(1000);
		
		$(".iphoneTab").addClass("iphoneTabShow");
		$(".androidTab").removeClass("androidTabShow");
		$(".symbianTab").removeClass("symbianTabShow");	
			
	});
	$(".androidTab").mouseover(function(){

		$(".icoIphoneBigPic").fadeOut(1000);
		$(".icoSymbianBigPic").fadeOut(1000);
		$(".icoAndroidBigPic").fadeIn(1000);

		$(".iphoneBtns").fadeOut(1000);
		$(".symbianBtns").fadeOut(1000);
		$(".androidBtns").fadeIn(1000);

		$(".androidTab").addClass("androidTabShow");
		$(".iphoneTab").removeClass("iphoneTabShow");
		$(".symbianTab").removeClass("symbianTabShow");

	});
	$(".symbianTab").mouseover(function(){
		
		$(".icoIphoneBigPic").fadeOut(1000);
		$(".icoAndroidBigPic").fadeOut(1000);
		$(".icoSymbianBigPic").fadeIn(1000);

		$(".iphoneBtns").fadeOut(1000);
		$(".androidBtns").fadeOut(1000);
		$(".symbianBtns").fadeIn(1000);

		$(".symbianTab").addClass("symbianTabShow");
		$(".androidTab").removeClass("androidTabShow");
		$(".iphoneTab").removeClass("iphoneTabShow");
	});

	$(".closeDiv").click(function () {
        $(".windows").hide();
    });

/*ck add end 20121116*/

});